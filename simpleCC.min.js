!function(n){"use strict";n.fn.simpleCharCounter=function(e){var t=n.extend({max:140,color:"#000",warnColor:"#F00",label:"",threshold:.2,displayMode:"normal",onEmpty:"none",legend:"chars left",strictText:!1},e),r=this,a=!1,l=n(""===t.label?"<div></div>":t.label),o=function(n){a=n.val().length<=t.max},i=function(n){var e=t.max-n;return l.text(e+" "+t.legend).css("color",e<t.max*t.threshold?t.warnColor:t.color),e>0},c=function(n){if(t.strictText&&n.val().length>t.max){var e=n.val().substr(0,t.max);return n.val(e),o(n),!1}return o(n),!0},s=function(n){i(n.val().length),c(n)};return r.isValid=function(){return a},n(this).each(function(){var e=n(this);switch(e.after(l),t.displayMode){case"normal":i(e.val().length);break;case"write":break;default:i(e.val().length)}e.keydown(function(t){return-1===n.inArray(t.keyCode,[8,35,36,37,38,39,40])?i(e.val().length):!0})}).on("focus",function(){"write"!==t.displayMode&&i(n(this).val().length)}).on("change keydown keyup",function(){s(n(this))})}}(jQuery);