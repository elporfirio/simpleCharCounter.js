!function(t){t.fn.simpleCharCounter=function(e){var n=t.extend({max:140,color:"#000",warnColor:"#F00",label:"",threshold:.2,displayMode:"normal",onEmpty:"none",legend:"chars left",strictText:!1},e),i=t(""===n.label?"<div></div>":n.label),l=function(t,e){var l=n.max-e;return i.text(l+" "+n.legend).css("color",l<n.max*n.threshold?n.warnColor:n.color),l>0},a=function(e,i){if(n.strictText&&i.length>n.max){var l=t(e).val(),a=l.substr(0,n.max);t(e).val(a)}};return this.each(function(){switch(t(this).after(i),n.displayMode){case"normal":l(this,t(this).val().length);break;case"write":break;default:l(this,t(this).val().length)}t(this).keydown(function(e){return console.log(e),-1===t.inArray(e.keyCode,[8,35,36,37,38,39,40])?l(this,t(this).val().length):!0})}).focus(function(){"write"!=n.displayMode&&l(this,t(this).val().length)}).change(function(){l(this,t(this).val().length),a(this,t(this).val())}).keydown(function(){l(this,t(this).val().length),a(this,t(this).val())}).keyup(function(){l(this,t(this).val().length),a(this,t(this).val())})}}(jQuery);